<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>VisSlides Diagram Demo</title>
    <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgo=" />
    <style>
      div.mermaid {
        font-family: 'Courier New', Courier, monospace !important;
      }
    </style>
  </head>

  <body>
    <h1>VisSlides Diagram Demo</h1>

    <div>
      <textarea id="arrayInput" rows="10" cols="50">
        visslides
        page
        array
        @ 1
        @ 1
        @ 2 : arrow::next &blue&
        matrix
        @
        1
        1,1
        @
        page
        array
        @ 1
        @ 1
        @ 2 
        @ 3 : arrow::next &blue&
        matrix
        @
        1
        1{green},1{green}
        1,2{red},1
        @
        page
        array
        @ 1
        @ 1
        @ 2 
        @ 3 
        @ 5: arrow::next &blue&
        matrix
        @
        1
        1,1
        1{green},2{green},1
        1,3{red}
        @
        page
        array
        @ 1
        @ 1
        @ 2 
        @ 3 
        @ 5
        @ 8: arrow::next &blue&
        matrix
        @
        1
        1,1
        1,2{green},1{green}
        1,3,3{red},1
        @
        page
        array
        @ 1
        @ 1
        @ 2 
        @ 3 
        @ 5
        @ 8
        @ 13: arrow::next &blue&
        matrix
        @
        1
        1,1
        1,2,1
        1{green},3{green},3,1
        1,4{red}
        @
        page
        array
        @ 1
        @ 1
        @ 2 
        @ 3 
        @ 5
        @ 8
        @ 13
        @ 21: arrow::next &blue&
        matrix
        @
        1
        1,1
        1,2,1
        1,3{green},3{green},1
        1,4,6{red}
        @
        page
        array
        @ 1
        @ 1
        @ 2 
        @ 3 
        @ 5
        @ 8
        @ 13
        @ 21
        @ 34: arrow::next &blue&
        matrix
        @
        1
        1,1
        1,2,1
        1,3,3{green},1{green}
        1,4,6,4{red},1
        @</textarea
      >
      <br />
      <button id="renderButton">Render Diagram</button>
    </div>

    <div class="diagrams">
      <div id="mermaidDiagram" class="mermaid"></div>
    </div>

    <script type="module">
      import mermaid from '/mermaid.esm.mjs';

      async function renderDiagram() {
        const input = document.getElementById('arrayInput').value;
        const { svg } = await mermaid.render('dynamicDiagram', input);
        document.getElementById('mermaidDiagram').innerHTML = svg;
      }

      document.getElementById('renderButton').addEventListener('click', async () => {
        await renderDiagram();
      });

      window.onload = async () => {
        await renderDiagram();
      };

      mermaid.initialize({
        startOnLoad: true,
        logLevel: 3,
        securityLevel: 'loose',
      });
    </script>

    <style>
      .diagrams {
        display: flex;
        flex-wrap: wrap;
      }
      #arrayInput {
        width: 50vw;
        padding: 1em;
      }
      #mermaidDiagram {
        width: 45vw;
        padding: 2em;
      }
    </style>
  </body>
</html>
