<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Mermaid Matrix Diagram Demo</title>
    <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgo=" />
    <style>
      div.mermaid {
        font-family: 'Courier New', Courier, monospace !important;
      }
    </style>
  </head>

  <body>
    <h1>Matrix Diagram Demo</h1>

    <div>
      <textarea id="arrayInput" rows="10" cols="50">
matrix
@
1,2,3{red},4
5,6{green},7{blue},8{green}
9,10,11{red},12
13,14,15,16
@</textarea
      >
      <br />
      <button id="renderButton">Render Diagram</button>
    </div>

    <div class="diagrams">
      <div id="mermaidDiagram" class="mermaid"></div>
    </div>

    <script type="module">
      import mermaid from '/mermaid.esm.mjs';

      async function renderDiagram() {
        const input = document.getElementById('arrayInput').value;
        const { svg } = await mermaid.render('dynamicDiagram', input);
        document.getElementById('mermaidDiagram').innerHTML = svg;
      }

      document.getElementById('renderButton').addEventListener('click', async () => {
        await renderDiagram();
      });

      window.onload = async () => {
        await renderDiagram();
      };

      mermaid.initialize({
        startOnLoad: true,
        logLevel: 3,
        securityLevel: 'loose',
      });
    </script>

    <style>
      .diagrams {
        display: flex;
        flex-wrap: wrap;
      }
      #arrayInput {
        width: 50vw;
        padding: 1em;
      }
      #mermaidDiagram {
        width: 45vw;
        padding: 2em;
      }
    </style>
  </body>
</html>
